% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{describe_mfrm_data}
\alias{describe_mfrm_data}
\title{Summarize MFRM input data (TAM-style descriptive snapshot)}
\usage{
describe_mfrm_data(
  data,
  person,
  facets,
  score,
  weight = NULL,
  rating_min = NULL,
  rating_max = NULL,
  keep_original = FALSE,
  include_person_facet = FALSE,
  include_agreement = TRUE,
  rater_facet = NULL,
  context_facets = NULL,
  agreement_top_n = NULL
)
}
\arguments{
\item{data}{A data.frame in long format (one row per rating event).}

\item{person}{Column name for person IDs.}

\item{facets}{Character vector of facet column names.}

\item{score}{Column name for observed score.}

\item{weight}{Optional weight/frequency column name.}

\item{rating_min}{Optional minimum category value.}

\item{rating_max}{Optional maximum category value.}

\item{keep_original}{Keep original category values.}

\item{include_person_facet}{If \code{TRUE}, include person-level rows in
\code{facet_level_summary}.}

\item{include_agreement}{If \code{TRUE}, include an observed-score inter-rater
agreement bundle (summary/pairs/settings) in the output.}

\item{rater_facet}{Optional rater facet name used for agreement summaries.
If \code{NULL}, inferred from facet names.}

\item{context_facets}{Optional facets used to define matched contexts for
agreement. If \code{NULL}, all remaining facets (including \code{Person}) are used.}

\item{agreement_top_n}{Optional maximum number of agreement pair rows.}
}
\value{
A list of class \code{mfrm_data_description} with:
\itemize{
\item \code{overview}: one-row run-level summary
\item \code{missing_by_column}: missing counts in selected input columns
\item \code{score_descriptives}: output from \code{\link[psych:describe]{psych::describe()}} for score
\item \code{weight_descriptives}: output from \code{\link[psych:describe]{psych::describe()}} for weight
\item \code{score_distribution}: weighted and raw score frequencies
\item \code{facet_level_summary}: per-level usage and score summaries
\item \code{linkage_summary}: person-facet connectivity diagnostics
\item \code{agreement}: observed-score inter-rater agreement bundle
}
}
\description{
Summarize MFRM input data (TAM-style descriptive snapshot)
}
\details{
This function provides a compact descriptive bundle similar to the
pre-fit summaries commonly checked in TAM workflows:
sample size, score distribution, per-facet coverage, and linkage counts.
\code{psych::describe()} is used for numeric descriptives of score and weight.
}
\section{Interpreting output}{

Recommended order:
\itemize{
\item \code{overview}: confirms sample size, facet count, and category span.
\item \code{missing_by_column}: identifies immediate data-quality risks.
\item \code{score_distribution}: checks sparse/unused score categories.
\item \code{facet_level_summary} and \code{linkage_summary}: checks per-level support and
person-facet connectivity.
\item \code{agreement}: optional observed inter-rater consistency summary.
}
}

\section{Typical workflow}{

\enumerate{
\item Run \code{describe_mfrm_data()} on long-format input.
\item Review \code{summary(ds)} and \code{plot(ds, ...)}.
\item Resolve missingness/sparsity issues before \code{\link[=fit_mfrm]{fit_mfrm()}}.
}
}

\examples{
toy <- expand.grid(
  Person = paste0("P", 1:4),
  Rater = paste0("R", 1:2),
  Criterion = c("Content", "Organization", "Language"),
  stringsAsFactors = FALSE
)
toy$Score <- (
  as.integer(factor(toy$Person)) +
  2 * as.integer(factor(toy$Rater)) +
  as.integer(factor(toy$Criterion))
) \%\% 3
ds <- describe_mfrm_data(
  data = toy,
  person = "Person",
  facets = c("Rater", "Criterion"),
  score = "Score"
)
s_ds <- summary(ds)
s_ds$overview
p_ds <- plot(ds, draw = FALSE)
class(p_ds)
}
\seealso{
\code{\link[=fit_mfrm]{fit_mfrm()}}, \code{\link[=audit_mfrm_anchors]{audit_mfrm_anchors()}}
}
