% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{fair_average_table}
\alias{fair_average_table}
\title{Build a FACETS Table 12-style fair-average table bundle}
\usage{
fair_average_table(
  fit,
  diagnostics = NULL,
  facets = NULL,
  totalscore = TRUE,
  umean = 0,
  uscale = 1,
  udecimals = 2,
  omit_unobserved = FALSE,
  xtreme = 0
)
}
\arguments{
\item{fit}{Output from \code{\link[=fit_mfrm]{fit_mfrm()}}.}

\item{diagnostics}{Optional output from \code{\link[=diagnose_mfrm]{diagnose_mfrm()}}.}

\item{facets}{Optional subset of facets.}

\item{totalscore}{Include all observations for score totals (\code{TRUE}) or apply
FACETS-style extreme-row exclusion (\code{FALSE}).}

\item{umean}{Additive score-to-report origin shift.}

\item{uscale}{Multiplicative score-to-report scale.}

\item{udecimals}{Rounding digits used in formatted output.}

\item{omit_unobserved}{If \code{TRUE}, remove unobserved levels.}

\item{xtreme}{Extreme-score adjustment amount.}
}
\value{
A named list with:
\itemize{
\item \code{by_facet}: named list of formatted data.frames
\item \code{stacked}: one stacked data.frame across facets
\item \code{raw_by_facet}: unformatted internal tables
\item \code{settings}: resolved options
}
}
\description{
Build a FACETS Table 12-style fair-average table bundle
}
\details{
This function wraps internal FACETS-style fair-average calculations and
returns both facet-wise and stacked tables, including \verb{Fair(M) Average}
and \verb{Fair(Z) Average}.
}
\section{Interpreting output}{

\itemize{
\item \code{stacked}: cross-facet table for global comparison.
\item \code{by_facet}: per-facet formatted tables for reporting.
\item \code{raw_by_facet}: unformatted values for custom analyses/plots.
\item \code{settings}: scoring-transformation and filtering options used.
}

Larger observed-vs-fair gaps can indicate systematic scoring tendencies by
specific facet levels.
}

\section{Typical workflow}{

\enumerate{
\item Run \code{fair_average_table(fit, ...)}.
\item Inspect \code{summary(t12)} and \code{t12$stacked}.
\item Visualize with \code{\link[=plot_fair_average]{plot_fair_average()}}.
}
}

\section{Output columns}{

The \code{stacked} data.frame contains:
\describe{
\item{Facet}{Facet name for this row.}
\item{Level}{Element label within the facet.}
\item{Obsvd Average}{Observed raw-score average.}
\item{Fair(M) Average}{Model-adjusted fair average (mean-based).}
\item{Fair(Z) Average}{Model-adjusted fair average (z-score-based).}
\item{Measure}{Estimated logit measure for this level.}
\item{SE}{Standard error of the measure.}
\item{Infit MnSq, Outfit MnSq}{Fit statistics for this level.}
}
}

\examples{
toy <- expand.grid(
  Person = paste0("P", 1:4),
  Rater = paste0("R", 1:2),
  Criterion = c("Content", "Organization", "Language"),
  stringsAsFactors = FALSE
)
toy$Score <- (
  as.integer(factor(toy$Person)) +
  2 * as.integer(factor(toy$Rater)) +
  as.integer(factor(toy$Criterion))
) \%\% 3
fit <- fit_mfrm(toy, "Person", c("Rater", "Criterion"), "Score", method = "JML", maxit = 25)
t12 <- fair_average_table(fit, udecimals = 2)
summary(t12)
p_t12 <- plot(t12, draw = FALSE)
class(p_t12)
}
\seealso{
\code{\link[=diagnose_mfrm]{diagnose_mfrm()}}, \code{\link[=unexpected_response_table]{unexpected_response_table()}}, \code{\link[=displacement_table]{displacement_table()}}
}
