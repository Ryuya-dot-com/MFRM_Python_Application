% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{plot.mfrm_fit}
\alias{plot.mfrm_fit}
\title{Plot an \code{mfrm_fit} object}
\usage{
\method{plot}{mfrm_fit}(
  x,
  type = NULL,
  facet = NULL,
  top_n = 30,
  theta_range = c(-6, 6),
  theta_points = 241,
  title = NULL,
  palette = NULL,
  label_angle = 45,
  show_ci = FALSE,
  ci_level = 0.95,
  draw = TRUE,
  ...
)
}
\arguments{
\item{x}{Output from \code{\link[=fit_mfrm]{fit_mfrm()}}.}

\item{type}{Plot type.
If omitted (\code{NULL}), returns a bundle with Wright map, Pathway map,
and category characteristic curves.
Single-plot options are \code{"facet"}, \code{"person"}, \code{"step"}, \code{"wright"},
\code{"pathway"}, and \code{"ccc"}.}

\item{facet}{Optional facet name when \code{type = "facet"}.}

\item{top_n}{Maximum number of facet levels shown for \code{type = "facet"}.}

\item{theta_range}{Theta/logit plotting range for pathway and CCC plots.}

\item{theta_points}{Number of grid points for pathway and CCC curves.}

\item{title}{Optional custom title for the selected plot.}

\item{palette}{Optional named color overrides.
Supported names include \code{facet_level}, \code{step_threshold}, \code{person_hist},
\code{step_line}, \code{facet_bar}, and \code{grid}.}

\item{label_angle}{X-axis label angle for categorical axes.}

\item{show_ci}{If \code{TRUE}, draws confidence-interval whiskers on
Wright map facet/step locations and facet bar plots.
Requires SE information computed from the observation table.}

\item{ci_level}{Confidence level for whiskers (default 0.95).}

\item{draw}{If \code{TRUE}, draws with base graphics.}

\item{...}{Reserved for generic compatibility.}
}
\value{
If \code{type} is \code{NULL}, a named list (\code{mfrm_plot_bundle}) containing plotting data.
Otherwise, a single plotting-data object (\code{mfrm_plot_data}).
}
\description{
Plot an \code{mfrm_fit} object
}
\details{
\code{plot(fit)} returns a named list with three plotting-data objects:
\itemize{
\item \code{wright_map}
\item \code{pathway_map}
\item \code{category_characteristic_curves}
}

Palette behavior:
\itemize{
\item For \code{"wright"}/bundle Wright panel, use named keys such as
\code{facet_level}, \code{step_threshold}, \code{person_hist}, \code{grid}.
\item For \code{"step"}, use \code{step_line} (and optionally \code{grid}).
\item For \code{"person"}, use \code{person_hist}.
\item For \code{"pathway"} and \code{"ccc"}, unnamed or named vectors are matched to
detected curve groups in plotting order.
}

If \code{draw = TRUE}, base R graphics are produced.
}
\section{Interpreting output}{

\itemize{
\item bundle mode (\code{type = NULL}) returns all three core plotting payloads.
\item single mode (\code{type = "facet"}, \code{"person"}, \code{"step"}, \code{"wright"},
\code{"pathway"}, \code{"ccc"}) returns one plotting payload.
}
}

\section{Typical workflow}{

\enumerate{
\item Run \code{plot(fit, draw = FALSE)} to collect reusable plot data.
\item Switch to one panel with \code{type = ...} for focused review.
\item Set \code{draw = TRUE} with palette options for direct base-R rendering.
}
}

\examples{
toy <- expand.grid(
  Person = paste0("P", 1:4),
  Rater = paste0("R", 1:2),
  Criterion = c("Content", "Organization", "Language"),
  stringsAsFactors = FALSE
)
toy$Score <- (
  as.integer(factor(toy$Person)) +
  2 * as.integer(factor(toy$Rater)) +
  as.integer(factor(toy$Criterion))
) \%\% 3
fit <- fit_mfrm(toy, "Person", c("Rater", "Criterion"), "Score", method = "JML", maxit = 25)
maps <- plot(fit, draw = FALSE)
p1 <- plot(fit, type = "wright", draw = FALSE)
p2 <- plot(fit, type = "pathway", draw = FALSE)
p3 <- plot(fit, type = "ccc", draw = FALSE)
if (interactive()) {
  plot(
    fit,
    type = "wright",
    title = "Customized Wright Map",
    palette = c(facet_level = "#1f78b4", step_threshold = "#d95f02"),
    label_angle = 45
  )
  plot(
    fit,
    type = "step",
    title = "Customized Step Parameters",
    palette = c(step_line = "#008b8b"),
    label_angle = 45
  )
  plot(
    fit,
    type = "pathway",
    title = "Customized Pathway Map",
    palette = c("#1f78b4")
  )
  plot(
    fit,
    type = "ccc",
    title = "Customized Category Characteristic Curves",
    palette = c("#1b9e77", "#d95f02", "#7570b3")
  )
}
}
\seealso{
\code{\link[=fit_mfrm]{fit_mfrm()}}, \code{\link[=summary.mfrm_fit]{summary.mfrm_fit()}}, \code{\link[=plot_residual_pca]{plot_residual_pca()}}
}
