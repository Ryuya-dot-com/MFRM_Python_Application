% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{plot_displacement}
\alias{plot_displacement}
\title{Plot displacement diagnostics using base R}
\usage{
plot_displacement(
  x,
  diagnostics = NULL,
  anchored_only = FALSE,
  facets = NULL,
  plot_type = c("lollipop", "hist"),
  top_n = 40,
  draw = TRUE,
  ...
)
}
\arguments{
\item{x}{Output from \code{\link[=fit_mfrm]{fit_mfrm()}} or \code{\link[=displacement_table]{displacement_table()}}.}

\item{diagnostics}{Optional output from \code{\link[=diagnose_mfrm]{diagnose_mfrm()}} when \code{x} is \code{mfrm_fit}.}

\item{anchored_only}{Keep only anchored/group-anchored levels.}

\item{facets}{Optional subset of facets.}

\item{plot_type}{\code{"lollipop"} or \code{"hist"}.}

\item{top_n}{Maximum levels shown in \code{"lollipop"} mode.}

\item{draw}{If \code{TRUE}, draw with base graphics.}

\item{...}{Additional arguments passed to \code{\link[=displacement_table]{displacement_table()}} when \code{x} is \code{mfrm_fit}.}
}
\value{
A plotting-data object of class \code{mfrm_plot_data}.
}
\description{
Plot displacement diagnostics using base R
}
\details{
Displacement plots focus on anchor stability and estimate movement.
}
\section{Plot types}{

\describe{
\item{\code{"lollipop"} (default)}{Dot-and-line chart of displacement values.
X-axis: displacement (logits).  Y-axis: element labels.  Points
colored red when flagged.  Dashed lines at +/- threshold.  Ordered
by absolute displacement.}
\item{\code{"hist"}}{Histogram of displacement values with Freedman-Diaconis
breaks.  Dashed reference lines at +/- threshold.  Use for
inspecting the overall distribution shape.}
}
}

\section{Interpreting output}{

Lollipop: top absolute displacement levels; flagged points indicate
larger movement from anchor expectations.

Histogram: overall displacement distribution and threshold lines.

Use \code{anchored_only = TRUE} when your main question is anchor robustness.
}

\section{Typical workflow}{

\enumerate{
\item Run with \code{plot_type = "lollipop"} and \code{anchored_only = TRUE}.
\item Inspect distribution with \code{plot_type = "hist"}.
\item Drill into flagged rows via \code{\link[=displacement_table]{displacement_table()}}.
}
}

\examples{
toy <- expand.grid(
  Person = paste0("P", 1:4),
  Rater = paste0("R", 1:2),
  Criterion = c("Content", "Organization", "Language"),
  stringsAsFactors = FALSE
)
toy$Score <- (
  as.integer(factor(toy$Person)) +
  2 * as.integer(factor(toy$Rater)) +
  as.integer(factor(toy$Criterion))
) \%\% 3
fit <- fit_mfrm(toy, "Person", c("Rater", "Criterion"), "Score", method = "JML", maxit = 25)
p <- plot_displacement(fit, anchored_only = FALSE, draw = FALSE)
if (interactive()) {
  plot_displacement(fit, anchored_only = FALSE, plot_type = "lollipop")
}
}
\seealso{
\code{\link[=displacement_table]{displacement_table()}}, \code{\link[=plot_unexpected]{plot_unexpected()}}, \code{\link[=plot_fair_average]{plot_fair_average()}}, \code{\link[=plot_qc_dashboard]{plot_qc_dashboard()}}
}
