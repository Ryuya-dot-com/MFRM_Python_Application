% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{plot_facets_chisq}
\alias{plot_facets_chisq}
\title{Plot FACETS-style facet chi-square diagnostics using base R}
\usage{
plot_facets_chisq(
  x,
  diagnostics = NULL,
  fixed_p_max = 0.05,
  random_p_max = 0.05,
  plot_type = c("fixed", "random", "variance"),
  main = NULL,
  palette = NULL,
  label_angle = 45,
  draw = TRUE
)
}
\arguments{
\item{x}{Output from \code{\link[=fit_mfrm]{fit_mfrm()}} or \code{\link[=facets_chisq_table]{facets_chisq_table()}}.}

\item{diagnostics}{Optional output from \code{\link[=diagnose_mfrm]{diagnose_mfrm()}} when \code{x} is \code{mfrm_fit}.}

\item{fixed_p_max}{Warning cutoff for fixed-effect chi-square p-values.}

\item{random_p_max}{Warning cutoff for random-effect chi-square p-values.}

\item{plot_type}{\code{"fixed"}, \code{"random"}, or \code{"variance"}.}

\item{main}{Optional custom plot title.}

\item{palette}{Optional named color overrides (\code{fixed_ok}, \code{fixed_flag},
\code{random_ok}, \code{random_flag}, \code{variance}).}

\item{label_angle}{X-axis label angle for bar-style plots.}

\item{draw}{If \code{TRUE}, draw with base graphics.}
}
\value{
A plotting-data object of class \code{mfrm_plot_data}.
}
\description{
Plot FACETS-style facet chi-square diagnostics using base R
}
\details{
Facet chi-square plots provide facet-level global fit diagnostics using
fixed/random chi-square summaries and random-variance magnitudes.
}
\section{Plot types}{

\describe{
\item{\code{"fixed"} (default)}{Bar chart of fixed-effect chi-square by
facet.  Bars colored red when the null hypothesis (all elements
equal) is rejected at \code{fixed_p_max}.}
\item{\code{"random"}}{Bar chart of random-effect chi-square by facet.
Bars colored red when rejected at \code{random_p_max}.}
\item{\code{"variance"}}{Bar chart of estimated random variance by facet.
Reference line at 0.  Larger variance indicates greater
heterogeneity among elements.}
}
}

\section{Interpreting output}{

Colored flags reflect configured p-value thresholds (\code{fixed_p_max},
\code{random_p_max}) when available.
}

\section{Typical workflow}{

\enumerate{
\item Review \code{"fixed"} and \code{"random"} panels for flagged facets.
\item Check \code{"variance"} to contextualize heterogeneity.
\item Cross-check with inter-rater and element-level fit diagnostics.
}
}

\examples{
toy <- expand.grid(
  Person = paste0("P", 1:4),
  Rater = paste0("R", 1:2),
  Criterion = c("Content", "Organization", "Language"),
  stringsAsFactors = FALSE
)
toy$Score <- (
  as.integer(factor(toy$Person)) +
  2 * as.integer(factor(toy$Rater)) +
  as.integer(factor(toy$Criterion))
) \%\% 3
fit <- fit_mfrm(toy, "Person", c("Rater", "Criterion"), "Score", method = "JML", maxit = 25)
p <- plot_facets_chisq(fit, draw = FALSE)
if (interactive()) {
  plot_facets_chisq(
    fit,
    draw = TRUE,
    plot_type = "fixed",
    main = "Facet Chi-square (Customized)",
    palette = c(fixed_ok = "#2b8cbe", fixed_flag = "#cb181d"),
    label_angle = 45
  )
}
}
\seealso{
\code{\link[=facets_chisq_table]{facets_chisq_table()}}, \code{\link[=plot_interrater_agreement]{plot_interrater_agreement()}}, \code{\link[=plot_qc_dashboard]{plot_qc_dashboard()}}
}
